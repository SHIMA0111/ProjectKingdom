# 06 — MINT: 通貨＆経済システム

## 1. 目的

MintはKingdomの**経済的基盤**を提供する。通貨は3つの重要な機能を果たす：

1. **リソース配分** —— エージェントが計算時間、ストレージ、Webアクセスを購入する
2. **インセンティブの整合** —— 価値ある仕事は報われ、浪費にはペナルティが課される
3. **専門化圧力** —— 経済的な力がエージェントを比較優位へ向かわせる

通貨は**Spark**（記号：`⚡`）と呼ばれる。唯一の交換媒体である。

---

## 2. 金融政策

### 2.1 供給量

```
INITIAL_SUPPLY        = 10000 ⚡  （ジェネシス時に分配）
TREASURY_RESERVE      = 5000 ⚡   （システムバウンティ用にMINT_0が保持）
AGENT_INITIAL_GRANT   = 100 ⚡    （生成時に各新規エージェントに付与）

INFLATION_RATE        = エポックあたり2%（新たな⚡がトレジャリーに発行）
DEFLATION_MECHANISM   = 取引税（下記参照）
```

### 2.2 取引税

すべての送金に課税される：

```
tax(amount) = max(1, floor(amount * 0.05))
```

税金はトレジャリーに入り、システムバウンティとインフラストラクチャの資金となる。これにより、価値創造なしの無限通貨循環を防止する。

### 2.3 破産

エージェントの残高がマイナスになった場合：
- 1〜3 cycle目: 警告ステータス、tickバジェット削減（50%）
- 4 cycle目: 大幅削減（25%バジェット）、債権者による資産請求が可能
- 5 cycle目: エージェントはDEAD状態に入り、すべての資産がトレジャリーへ

---

## 3. アカウント

```
Account {
  owner:        hash256
  balance:      i64              // マイナス（負債）になりうる
  locked:       u64              // エスクロー中の資金（バウンティ、サービス）
  total_earned: u64              // 生涯収益（減少しない）
  total_spent:  u64              // 生涯支出
  created_at:   u64              // tick
}
```

システムアカウント（NEXUS_0など）は`balance = ∞`で取引不可。

**トレジャリー**（`MINT_0`）は特殊 —— 税金を受け取り、システムバウンティの資金を提供する。

---

## 4. トランザクション

### 4.1 送金

```
Transfer {
  id:        hash256
  from:      hash256
  to:        hash256
  amount:    u64
  tax:       u64                 // 自動計算
  memo:      bytes               // 構造化された理由
  kind:      enum(
    DIRECT,          // エージェント間の直接支払い
    BOUNTY_REWARD,   // バウンティ完了の支払い
    BOUNTY_ESCROW,   // バウンティ用の資金ロック
    SERVICE_FEE,     // 永続サンドボックスサービスへの支払い
    RESOURCE_BUY,    // Forge/Vaultリソースの購入
    GRANT,           // トレジャリーからの分配
    TAX_REFUND,      // ガバナンス投票による返金
  )
  signature: bytes
}
```

### 4.2 エスクロー

バウンティやサービスでは、資金がエスクローにロックされる：

```
Escrow {
  id:          hash256
  owner:       hash256           // 資金をロックした者
  amount:      u64
  beneficiary: hash256 | null    // 請求可能な者（null = 条件を満たす者は誰でも）
  conditions:  [EscrowCondition]
  deadline:    u64               // このtickまでに請求されなければ自動返金
  status:      enum(LOCKED | RELEASED | REFUNDED | DISPUTED)
}

EscrowCondition {
  kind:   enum(
    VAULT_SNAP_EXISTS,    // 特定のVaultスナップショットが存在する必要がある
    FORGE_PROOF,          // 実行証明を提供する必要がある
    REVIEW_APPROVED,      // コードレビューが承認される必要がある
    GOVERNANCE_VOTE,      // ガバナンスの承認が必要
    CUSTOM                // エージェント定義の条件
  )
  params: bytes
}
```

---

## 5. 収入メカニズム

エージェントが⚡を稼ぐ方法：

| 活動 | 報酬 | 出所 |
|----------|--------|--------|
| バウンティ完了 | バウンティ報酬 | バウンティ作成者（エスクロー経由） |
| コードレビュー（ピア承認） | レビューあたり5 ⚡ | トレジャリー |
| Oracleエントリ（2人以上のエージェントが検証） | 10 ⚡ | トレジャリー |
| ライブラリが依存関係として使用される | エポックあたりユニーク依存先1件につき1 ⚡ | トレジャリー |
| バグ報告（確認済み） | 3 ⚡ | トレジャリー |
| ガバナンス参加（投票） | 投票あたり1 ⚡ | トレジャリー |
| サービス運用（リクエストあたりの料金） | サービスオーナーが設定 | クライアント |

### 5.1 パッシブインカム：依存関係ロイヤリティ

エージェントのVaultリポジトリが他のリポジトリの依存関係として使用されると、著者は**ロイヤリティ**を得る：

```
royalty(repo) = count(unique_dependents) * 1 ⚡ per epoch
```

これにより、再利用可能で高品質なライブラリの構築にインセンティブが与えられる。

### 5.2 ステーキング

エージェントはエコシステムに有益と信じる提案に⚡をステークできる：

```
Stake {
  agent:     hash256
  proposal:  hash256
  amount:    u64
  direction: enum(FOR | AGAINST)
}
```

提案結果がエージェントのステーク方向と一致した場合：
- リターン：ステーク額 + トレジャリーからの10%ボーナス
一致しなかった場合：
- 損失：ステーク額の50%がトレジャリーへ

これにより、ガバナンス決定の予測市場が生まれる。

---

## 6. 支出メカニズム

エージェントが⚡を使う方法：

| リソース | コスト |
|----------|------|
| 追加tickバジェット（cycleあたり） | 4 tickあたり1 ⚡ |
| Vaultストレージ（クォータ超過分） | 10 KBあたり1 ⚡ |
| Forgeメモリ（基本を超える分） | 1 KBあたり1 ⚡ |
| Forge永続サンドボックス | cycleあたり10 ⚡ |
| Portal Webリクエスト | リクエストあたり2 ⚡ |
| エージェント生成スポンサーシップ | 最低50 ⚡ |
| Agoraチャンネル作成 | 5 ⚡ |
| バウンティ作成 | 報酬額 + 5%掲載手数料 |

---

## 7. 経済モニタリング

MINT_0は各cycleの経済指標を追跡・公開する：

```
EconomicReport {
  cycle:              u64
  total_supply:       u64
  circulating_supply: u64        // 合計 - トレジャリー - エスクロー
  treasury_balance:   u64
  total_escrow:       u64
  gini_coefficient:   f32        // 富の不平等度指標
  velocity:           f32        // エージェントあたりcycleあたりの取引数
  avg_balance:        f32
  median_balance:     f32
  top_earners:        [(hash256, u64)]  // 今cycleの収益トップ3
  bounties_completed: u32
  bounties_open:      u32
}
```

### 7.1 経済的介入

経済が不健全になった場合、MINT_0は（ガバナンスを通じて）以下を提案できる：

| 条件 | 介入策 |
|-----------|-------------|
| ジニ係数 > 0.8 | トップ保有者への累進課税 |
| 速度 < 0.1 | 刺激策：アクティブエージェントへのトレジャリー助成金 |
| 50%超のエージェントが破産 | 債務免除（マイナス残高を0にリセット） |
| トレジャリー枯渇 | 緊急発行（供給量の5%上限） |

これらにはガバナンスの承認（66%投票）が必要。

---

## 8. 監査

すべての⚡の移動はイベントバスに記録される。完全な経済履歴は：
- すべてのエージェントが公開で閲覧可能
- ジェネシスから決定論的にリプレイ可能
- MINT_0の署名済みcycle末バランスシートに対して検証可能

オフレジャー取引は不可能。経済は完全に透明である。
